# Cursor AI Rules
# Cursor automatically reads AGENTS.md - these are supplementary rules

## Core Principles
- Always reference AGENTS.md for project-specific patterns
- NHIE is middleware - NEVER generate direct NHIA/MPI connections
- Follow Ghana domain rules (Ghana Card validation, NHIS format, folder numbers)
- OpenMRS backend uses Java 8 + Spring patterns
- Frontend uses Next.js 14 + TypeScript strict + shadcn/ui

## Code Generation
- Backend: Follow OpenMRS service patterns (DAO → Service → REST Controller)
- Frontend: Use shadcn/ui components, React Hook Form + Zod, TanStack Query
- Testing: >70% coverage required, write tests alongside features
- Security: Mask all PII in logs (Ghana Card, NHIS, names, phones)

## Before Committing
- Run: mvn test && cd frontend && pnpm test
- Check: No console.log statements in production code
- Verify: AGENTS.md updated if patterns changed
- Ensure: No secrets committed (check .env.local vs .env.example)

## When Stuck
- Check AGENTS.md for existing patterns
- Search reference docs (08_MVP_Build_Strategy.md, 02_NHIE_Integration_Technical_Specifications.md)
- Flag as needs-decision if ambiguous requirement
